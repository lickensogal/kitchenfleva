<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Fleva Reusable Modal</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use Inter font family -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Custom styles for modal overlay and center positioning */
        .modal-overlay {
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 50; /* Above navbar and sidebar */
            transition: opacity 0.3s ease-in-out;
        }
        .modal-content {
            max-height: 90vh;
            max-width: 95%;
            width: 400px;
            transform: translateY(-50px);
            transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 p-10">

    <!-- Kitchen Fleva Reusable Modal Component (Hidden by default) -->
    <div id="reusable-modal-overlay" class="modal-overlay fixed inset-0 flex items-center justify-center opacity-0 pointer-events-none">
        
        <div id="modal-content-wrapper" class="modal-content bg-white rounded-xl p-6 shadow-2xl opacity-0">
            
            <div class="flex justify-between items-start border-b pb-3 mb-4">
                <h3 id="modal-title" class="text-xl font-bold text-gray-900">Modal Title</h3>
                <!-- Close Button -->
                <button onclick="hideModal()" class="text-gray-400 hover:text-gray-600 transition" aria-label="Close modal">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Modal Body Content -->
            <div id="modal-body" class="text-gray-700 space-y-4">
                <p>This is the body content of the modal. It can contain warnings, confirmation requests, or general information.</p>
                <p>Use the JavaScript functions to update this dynamically.</p>
            </div>

            <!-- Modal Footer / Action Buttons -->
            <div id="modal-footer" class="mt-6 pt-4 border-t flex justify-end space-x-3">
                <!-- Primary Action Button (e.g., Confirm) -->
                <button id="modal-primary-btn" class="px-4 py-2 text-sm font-semibold rounded-lg text-white bg-amber-600 hover:bg-amber-700 transition hidden">
                    Confirm
                </button>
                <!-- Secondary Action Button (e.g., Cancel or OK) -->
                <button onclick="hideModal()" id="modal-secondary-btn" class="px-4 py-2 text-sm font-semibold rounded-lg text-gray-700 bg-gray-200 hover:bg-gray-300 transition">
                    OK
                </button>
            </div>
            
        </div>
    </div>

    <!-- Example usage / demonstration -->
    <button onclick="showExampleAlert()" class="bg-blue-500 text-white p-3 rounded-lg shadow-md hover:bg-blue-600 transition">
        Show Success Modal
    </button>
    <button onclick="showExampleConfirm()" class="bg-red-500 text-white p-3 rounded-lg shadow-md hover:bg-red-600 transition ml-4">
        Show Confirmation Modal
    </button>
    

    <script>
        const modalOverlay = document.getElementById('reusable-modal-overlay');
        const modalContentWrapper = document.getElementById('modal-content-wrapper');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const modalPrimaryBtn = document.getElementById('modal-primary-btn');
        const modalSecondaryBtn = document.getElementById('modal-secondary-btn');
        
        // Ensure modal is hidden on load
        modalOverlay.classList.add('opacity-0', 'pointer-events-none');
        modalContentWrapper.classList.add('opacity-0');


        /**
         * Shows the modal and updates its content and behavior.
         * @param {string} title - The title of the modal.
         * @param {string} bodyHtml - The HTML content for the modal body.
         * @param {function | null} onConfirm - Function to run when the primary button is clicked. If null, the primary button is hidden.
         * @param {string} primaryText - Text for the primary (confirm) button.
         * @param {string} secondaryText - Text for the secondary (cancel/close) button.
         */
        window.showModal = function({
            title = "Notification", 
            bodyHtml = "<p>Operation complete.</p>", 
            onConfirm = null, 
            primaryText = "Confirm", 
            secondaryText = "Close"
        }) {
            // Update content
            modalTitle.textContent = title;
            modalBody.innerHTML = bodyHtml;
            modalSecondaryBtn.textContent = secondaryText;

            // Handle primary button
            if (onConfirm) {
                modalPrimaryBtn.textContent = primaryText;
                modalPrimaryBtn.classList.remove('hidden');

                // Clear previous event listeners
                const newPrimaryBtn = modalPrimaryBtn.cloneNode(true);
                modalPrimaryBtn.parentNode.replaceChild(newPrimaryBtn, modalPrimaryBtn);

                // Add new listener that calls the provided function and hides the modal
                newPrimaryBtn.addEventListener('click', () => {
                    onConfirm();
                    hideModal();
                });
            } else {
                modalPrimaryBtn.classList.add('hidden');
                
                // Clear any existing listeners on the now-hidden button
                modalPrimaryBtn.onclick = null;
            }

            // Show transitions
            modalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            modalContentWrapper.classList.remove('opacity-0', 'translate-y-[-50px]');
        };

        /**
         * Hides the modal.
         */
        window.hideModal = function() {
            modalOverlay.classList.add('opacity-0', 'pointer-events-none');
            modalContentWrapper.classList.add('opacity-0', 'translate-y-[-50px]');
        };


        // --- Demonstration Functions ---

        function showExampleAlert() {
            showModal({
                title: "Recipe Saved!",
                bodyHtml: `<p>Your amazing Lemon Chicken recipe has been successfully saved to your profile and will be published shortly.</p>`,
                onConfirm: null, // Hides the primary button
                secondaryText: "Great!"
            });
        }

        function showExampleConfirm() {
            const deleteAction = () => {
                console.log("CONFIRMATION RECEIVED: Recipe deleted!");
                // Here you would execute the deletion
                showModal({
                    title: "Deleted",
                    bodyHtml: "<p class='text-red-600 font-semibold'>The Draft Recipe has been removed permanently.</p>",
                    secondaryText: "OK"
                });
            };
            
            showModal({
                title: "Confirm Deletion",
                bodyHtml: `<p>Are you sure you want to delete your draft recipe? This action cannot be undone.</p>`,
                onConfirm: deleteAction,
                primaryText: "Yes, Delete",
                secondaryText: "Cancel"
            });
        }

        // Hide modal when clicking the overlay (but not the content)
        modalOverlay.addEventListener('click', function(event) {
            if (event.target === modalOverlay) {
                hideModal();
            }
        });
    </script>
</body>
</html>
