<!-- ===========================================================================
     Kitchen Fleva - about.html
     Fully dynamic About Us Page
============================================================================== -->

<div class="container about-page-container">

  <!-- ========================= Hero Section ========================= -->
  <section class="hero-section about-hero" data-component="hero">
    <!-- Content dynamically fetched from Supabase "pages" table where page='about' -->
  </section>

  <!-- ========================= Our Story Section ========================= -->
  <section class="about-story" id="about-story">
    <!-- Fetched dynamically from Supabase -->
  </section>

  <!-- ========================= Mission & Vision Section ========================= -->
  <section class="about-mission-vision" id="mission-vision">
    <!-- Mission & Vision loaded dynamically from Supabase -->
  </section>

  <!-- ========================= Team Section ========================= -->
  <section class="about-team" id="team">
    <h2>Meet Our Team</h2>
    <div class="team-grid" id="team-grid">
      <!-- Dynamically populate team members from Supabase "team_members" table -->
    </div>
  </section>

  <!-- ========================= Call to Action Section ========================= -->
  <section class="about-cta" id="about-cta">
    <!-- Dynamically fetch CTA content from Supabase -->
  </section>

</div>

<!-- ========================= Dynamic Footer ========================= -->
<footer data-component="footer"></footer>

<script type="module">
  import { fetchData } from "../supabaseClient.js";
  import * as UI from "../js/ui.js";

  document.addEventListener("DOMContentLoaded", async () => {
    // Load Hero Section
    const hero = await fetchData("pages", ["title","subtitle","hero_image"], "page=eq.about");
    if(hero.length){
      document.querySelector(".hero-section").innerHTML = UI.renderHero(hero[0]);
    }

    // Load About Story
    const story = await fetchData("about_sections", ["section_title","section_content"], "");
    if(story.length){
      document.getElementById("about-story").innerHTML = story.map(s => UI.renderAboutSection(s)).join("");
    }

    // Load Mission & Vision
    const mv = await fetchData("mission_vision", ["type","content"], "");
    if(mv.length){
      document.getElementById("mission-vision").innerHTML = UI.renderMissionVision(mv);
    }

    // Load Team Members
    const team = await fetchData("team_members", ["name","role","image_url"], "");
    if(team.length){
      document.getElementById("team-grid").innerHTML = team.map(member => UI.renderTeamMember(member)).join("");
    }

    // Load Call To Action
    const cta = await fetchData("cta_sections", ["title","subtitle","button_text","button_link"], "page=eq.about");
    if(cta.length){
      document.getElementById("about-cta").innerHTML = UI.renderCTA(cta[0]);
    }

    // Initialize UI components
    UI.initAccordions();
    UI.initModals();
    UI.initCarousels();
    UI.initToasts();
    UI.initScrollTop();
  });
                            </script>
